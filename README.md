# Курсовой проект по курсу highload в технопарке

## 1. **Выбор темы**
Сервис по планированию путешесвий (TripAdvisor)

## 2. **Определение возможного диапазона нагрузок подобного проекта**
### Самые крупные сервисы:
## TripAdvisor
Месячная аудитория- 490 миллионов [Источник](https://review42.com/tripadvisor-statistics/)
Среднее время проведения на подобных сайтах- 3 минуты [Источник](https://www.similarweb.com/website/tripadvisor.com/)

## 3. **Выбор планируемой нагрузки**
Планируемая нагрузка - 50% от доли TripAdvisor, т.е
- Месячная аудитория:  
    ```490/2=245 миллиона человек в месяц= 4 миллиона человек в месяц```

Оценивая себя как среднестатистического пользователя, подсчитал сколько пользовательского трафика займет стандартный workflow пользователя, а именно скролл ленты:
За 1 минуту 40 секунд было израсходовано 21 Мб траффика, 
![alt-текст]https://github.com/EvilBorsch/booking-highload/blob/main/Скриншоты%20(2).png "lenta")  

Выходит 0.21 Мб/с на одного среднестатистического пользователя
Учитывая среднее время пребывания на сайте: 0.21 Мб/с*180= 37.8 Мб/месяц

### В месяц:
- 245 млн * 37.8 / 1024 (для перевода в гигабайты) = 9310000 Гб

## 4. **Логическая схема базы данных**
![alt-текст](https://github.com/EvilBorsch/booking-highload/blob/main/Снимок%20экрана%202020-10-21%20в%2016.38.54.png "Схема бд")


## 5. **Физическая системы хранения**

В среднем за минуту на TripAdvisor отправляется 270 запросов от пользователей [Источник](https://expandedramblings.com/index.php/tripadvisor-statistics/) (без учета картинок)

```4 млн ежедневных пользователей * 270/60 RPS * ((3/60)/24 - плотность распределения) =  37500 RPS```

Для такой нагрузки возьмем 13 серверов с PostgreSQL. В среднем по 3000 RPS на 1. Все картинки будем хранить в Amazon S3 хранилище.

## 6. **Выбор прочих технологий**

##### Языки программирования

Backend - Golang. Язык предоставляет эффективный параллелизм, такой как C, C ++, Java, в то же время параллелизм в Go осуществляется намного проще благодаря горутинам, каналам и сборке мусора. Он имеет об обширную стандартную библиотеку, а также утилиты для форматирования кода, тестирования и расчета покрытия прямо из коробки. В нем очень удобно построена интеграция с внешними зависимостями посредствам go.mod. Go быстрый, кроссплатформенный, open-source с относительно низким порогом вхождения.

Frontend - HTML, CSS, TypeScript. Для  TypeScript будем использовать фреймворк React, который обеспечивает модульность, быстрый рендеринг, высокую run-time производительность. В сочетании с ES7 ReactTS может легко работать при высоких нагрузках. Также он имеет virtual DOM, которая позволяет упорядочивать документы форматов HTML, XHTML или XML в дерево, которое лучше всего подходит браузерам для анализа различных элементов веб-приложения.
	
##### Протоколы взаимодействия

Протокол связи между фронтендом и бэкендом - https, данные будут передаваться в формате json. 

Общение между микросервисами на бэкенде будет осуществляться по протоколу gRPC, данные будут передаваться в формате protobuf.

## 7. **Расчет нагрузки и потребного оборудования**

## 8. **Выбор хостинга / облачного провайдера и расположения серверов**

## 9. **Схема балансировки нагрузки (входящего трафика и внутрипроектного, терминация SSL)**

## 10. **Обеспечение отказоустойчивости** 
